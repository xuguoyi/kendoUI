<div id="tilelayout">
  <div class="choose-area">
    <div>选择货位：<input class="choose-location" value="1"></div>
    <div>
      <ul>
        <li><span class="all-status" style="background:palegoldenrod"></span>空货位</li>
        <li><span class="all-status" style="background:palegreen"></span>未满货位</li>
        <li><span class="all-status" style="background:pink"></span>满货物</li>
        <li><span class="all-status" style="background:paleturquoise"></span>混合批次</li>
      </ul>
      <ul>
        <li><span class="all-status" style="background: yellow;"></span>待检</li>
        <li><span class="all-status" style="background: green;"></span>合格</li>
        <li><span class="all-status" style="background: red;"></span>不合格</li>
        <li><span class="all-status" style="background: orange;"></span>冻结</li>
        <li><span class="all-status" style="background: blue;"></span>试作</li>
      </ul>
    </div>
  </div>
  
  <div class="location-map"></div>
</div>

<script>
$(function(){
  var data1 = [
    { cargo: 'A17222', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', status: ['red', 'yellow', 'orange', 'blue', 'green'], bg: 'pink' },
    { cargo: 'A18', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'A19', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'A20', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'A21', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'A22', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'A23', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'A24', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'A25', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'A26', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'A17', materil: 'RTOK276', cc: 'JESC', dd: '20', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
  ];
  var data2 = [
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B18', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'B19', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B20', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'B21', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B22', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B23', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'B24', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'B25', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B26', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'red', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'blue', bg: 'pink' },
    { cargo: 'B17', materil: 'RTOK276', cc: 'JESC', dd: '13', weight: '8000KG', ee: '80%', ff: 'green', bg: 'pink' },
  ]

  var locationData = [
    { text: "A", value: "1" },
    { text: "B", value: "2" }
  ];

  // create DropDownList from input HTML element
  $(".choose-location").kendoDropDownList({
    dataTextField: "text",
    dataValueField: "value",
    dataSource: locationData,
    index: 0,
    change: function () {
      refreshLocation()
    }
  })
  refreshLocation()
  function refreshLocation() {
    var arr = []
    var str = '';
    // if (!data || !data.length) {
    //   $("#tilelayout").html("");
    //   return;
    // }
    $(".location-map").html("");
    data1.forEach(function (item) {
      let headerStatus = '<h5 class="k-card-title">A17222</h5>'
      if (item.status) {
        headerStatus += '<ul>'
        item.status.forEach(function (item) {
          headerStatus += '<li class="location-map-status" style="background:' + item + '"></li>'
        })
        headerStatus += '</ul>'
      }
      console.log(item.bg)
      arr.push({
        colSpan: 1,
        rowSpan: 1,
        header: {
          template: headerStatus
        },
        bodyTemplate: '<ul style="background:' + item.bg + '">\
        <li>物料：'+ item.materil + '</li>\
        <li>供应商：'+ item.materil + '</li>\
        <li>工装数：'+ item.cc + '</li>\
        <li>占用率：'+ item.dd + '</li>\
        <li>总重：'+ item.weight + '</li>\
      </ul>'
      })
    })
    $(".location-map").kendoTileLayout({
      containers: arr,
      columns: 4
    });
  }
})
</script>